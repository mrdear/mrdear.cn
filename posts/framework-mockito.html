<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8" />
    
        <title>Mockito -- Mockito原理 | 屈定's Blog</title>
    

    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
<meta name="format-detection" content="telephone=no">
<meta name="author" content="Qu Ding" />
<meta name="designer" content="minfive" />
<meta name="keywords" content="屈定,技术开发,Java"/>
<meta name="description" content="记录成为程序员以来的历程,分享自己的认知,如果对你有帮助可以订阅最下方的RSS." />

<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<meta name="format-detection" content="telephone=yes" />
<meta name="mobile-web-app-capable" content="yes" />
<meta name="robots" content="all" />


  <meta name="google-site-verification" content="vI-8_Ee7chpyEu09yCt-bC91dWWmTx08Bb_Mv1gltl0" />


<link rel="canonical" href="https://mrdear.cn/posts/framework-mockito.html">
<link rel="manifest" href="/manifest.json" />
<link rel="icon" type="image/png" href="/favicon.ico" sizes="32x32">

<!-- Prefetch -->






<!-- CSS -->

<link rel="stylesheet" href="/scss/base/index.css">


<!-- RSS -->
<link rel="alternate" href="/atom.xml" title="屈定's Blog" type="application/atom+xml">

<!-- 统计 -->
<!-- Global site tag (gtag.js) - Google Analytics -->
<!-- 
  <script async src="https://www.googletagmanager.com/gtag/js?id=vI-8_Ee7chpyEu09yCt-bC91dWWmTx08Bb_Mv1gltl0"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'vI-8_Ee7chpyEu09yCt-bC91dWWmTx08Bb_Mv1gltl0');
  </script>
  -->
    
    
    
<link rel="stylesheet" href="/scss/views/page/post.css">


<meta name="generator" content="Hexo 7.1.1"></head>
<body ontouchstart>
    
        <!-- loading 页面 -->
<div id="page-loading" class="page page-loading" style="background-image: url('https://res.mrdear.cn/loading.gif')"></div>
    

    <div id="page" class="page js-hidden">
        
    <!-- 页头 -->
<header class="page__small-header page__header--small">
    <nav class="page__navbar">
        <div class="page__container navbar-container">
            <a class="page__logo" href="/" title="屈定's Blog" alt="屈定's Blog">
                <img src="https://res.mrdear.cn/1518101048.png" alt="屈定's Blog">
            </a>

            <nav class="page__nav">
                <ul class="nav__list clearfix">
                    
                        
                        <li class="nav__item">
                            <a href="/" alt="首页" title="首页">首页</a>
                        </li>
                    
                        
                        <li class="nav__item">
                            <a href="/archives/" alt="归档" title="归档">归档</a>
                        </li>
                    
                        
                        <li class="nav__item">
                            <a href="/about/" alt="关于" title="关于">关于</a>
                        </li>
                    
                </ul>
            </nav>

            <button class="page__menu-btn" type="button">
                <i class="iconfont icon-menu"></i>
            </button>
        </div>
    </nav>
</header>


        
    <main class="page__container page__main">
    <div class="page__content">
        <article class="page__post">
    <div class="post__cover">
        <img src="http://res.mrdear.cn/uPic/Mockito.png-default" alt="Mockito -- Mockito原理">
    </div>

    <header class="post__info">
        <h1 class="post__title">Mockito -- Mockito原理</h1>

        <div class="post__mark">
            <div class="mark__block">
                <i class="mark__icon iconfont icon-write"></i>
                <ul class="mark__list clearfix">
                    <li class="mark__item">
                        <a href="/">屈定</a>
                    </li>
                </ul>
            </div>
            
            <div class="mark__block">
                <i class="mark__icon iconfont icon-time"></i>
                <ul class="mark__list clearfix">
                    <li class="mark__item"><span>2020-07-19</span></li>
                </ul>
            </div>

            <div class="mark__block">
                <i class="mark__icon iconfont icon-tab"></i>
                <ul class="mark__list clearfix">
                    
                        <li class="mark__item">
                            <a href="/tags/Mockito/">Mockito</a>
                        </li>
                    
                </ul>
            </div>

            
        </div>
    </header>

    <div class="post__content">
        <p>最近开始使用Mockito进行单元测试，本篇文章是理解Mockito并对其常见测试方式进行归纳总结。</p>
<h2 id="Mocito体系"><a href="#Mocito体系" class="headerlink" title="Mocito体系"></a>Mocito体系</h2><p>从使用角度，可以将Mockito分为插桩以及验证，使用者只需要关心模块提供的能力，不需要太过于深入了解。</p>
<ul>
<li>插桩<ul>
<li>ArgumentMatcher：参数匹配工具，比如Mokito.eq(“屈定”)类似语句会创建该匹配</li>
<li>OngoingStubbing：mock入口类，用于打桩，应对 when() thenXXX形式</li>
<li>Stubber：mock入口类，用于打桩，应对doXXX when()形式</li>
</ul>
</li>
<li>验证<ul>
<li>VerificationMode：验证器，用于验证mock对象行为，常见实现有times()</li>
<li>InOrder：验证器的一种，用于验证执行顺序</li>
<li>ArgumentCaptor：用于被mock对象参数捕获</li>
</ul>
</li>
</ul>
<h2 id="Mockito原理"><a href="#Mockito原理" class="headerlink" title="Mockito原理"></a>Mockito原理</h2><p>想要在开发中随心所欲的使用Mockito达到单测目的，了解Mockito原理是必须的。当我们在用Mockito时，经常写出以下类似代码，从逻辑上可以分为四部分：定义Mock对象，定义方法返回值，调用<strong>单测方法</strong>(这里直接调用mock方法，方便阐述原理)，验证业务结果。那么每一步骤对于Mockito分别做了什么呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">UserService</span> <span class="variable">mockService</span> <span class="operator">=</span> Mockito.mock(UserService.class);</span><br><span class="line"></span><br><span class="line">Mockito.when(mockService.queryUser(Mockito.eq(<span class="string">&quot;xxx&quot;</span>)))</span><br><span class="line">    .thenReturn(<span class="keyword">new</span> <span class="title class_">User</span>(<span class="string">&quot;屈定&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> mockService.queryUser(<span class="string">&quot;xxx&quot;</span>);</span><br><span class="line">Assertions.assertEquals(<span class="string">&quot;屈定&quot;</span>, user.getOwner());</span><br></pre></td></tr></table></figure>
<p>简单来看，我们可以猜想到所谓的Mock测试技术原理应是预先定义好该方法返回值，使用AOP技术拦截对应的方法执行，当拦截直接返回对应的值，从而达到Mock效果，如下图所示：<br><img src="http://res.mrdear.cn/uPic/mockito_simple_struct.png-default"></p>
<p>问题回到Mockito，可以提出以下三个问题为思考的切入点：</p>
<ul>
<li>Mockito是如何创建AOP对象的</li>
<li>Mockito是如何预先定义方法返回值</li>
<li>Mockito是如何拦截方法执行并返回给定mock值的</li>
</ul>
<h3 id="Mockito是如何创建AOP对象的"><a href="#Mockito是如何创建AOP对象的" class="headerlink" title="Mockito是如何创建AOP对象的"></a>Mockito是如何创建AOP对象的</h3><p>Mockito AOP对象的创建，对应代码的第一行<code>Mockito.mock(UserService.class)</code>，贴一下相关代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># Mockito.mock(UserService.class)</span><br><span class="line"> <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">mock</span><span class="params">(Class&lt;T&gt; classToMock, MockSettings mockSettings)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> MOCKITO_CORE.mock(classToMock, mockSettings);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># MOCKITO_CORE.mock(xxxx)</span><br><span class="line"><span class="keyword">public</span> &lt;T&gt; T <span class="title function_">mock</span><span class="params">(Class&lt;T&gt; typeToMock, MockSettings settings)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (!MockSettingsImpl.class.isInstance(settings)) &#123;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Unexpected implementation of &#x27;&quot;</span> + settings.getClass().getCanonicalName() + <span class="string">&quot;&#x27;\n&quot;</span> + <span class="string">&quot;At the moment, you cannot provide your own implementations of that class.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">MockSettingsImpl</span> <span class="variable">impl</span> <span class="operator">=</span> MockSettingsImpl.class.cast(settings);</span><br><span class="line">    MockCreationSettings&lt;T&gt; creationSettings = impl.build(typeToMock);</span><br><span class="line">    <span class="type">T</span> <span class="variable">mock</span> <span class="operator">=</span> createMock(creationSettings);</span><br><span class="line">    mockingProgress().mockingStarted(mock, creationSettings);</span><br><span class="line">    <span class="keyword">return</span> mock;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上述代码中，<code>Mockito</code>会使用全局静态变量<code>MOCKITO_CORE</code>创建代理对象，核心逻辑都在<code>MockitoCore</code>中，我们不必关心很细节，所以仍然按照带着问题的方式去探索。</p>
<p>**1.**创建中的<code>MockSettings</code>可以做什么？</p>
<p><code>MockSettings</code>可以针对一个mock对象创建做额外的配置，比如使用指定构造函数进行初始化，设置mock的一些调用监听器，以及mock拦截后默认返回值，一般创建时不指定，系统默认为<code>new MockSettingsImpl().defaultAnswer(RETURNS_DEFAULTS)</code>。</p>
<p>**2.**代理对象创建使用的是什么技术？对应拦截器实现是什么？</p>
<p>对应细节都在<code>createMock(...)</code>方法中，这里就不贴代码，直接说结论。Mockito内部有一套插件机制，其中生成代理类对应<code>MockMaker</code>扩展点，默认实现为<code>org.mockito.internal.creation.bytebuddy.SubclassByteBuddyMockMaker</code>，即用ByteBuddy技术生成对应代理类，<code>ByteBuddy</code>博主了解的不是很多，但根据<code>SubclassBytecodeGenerator</code>处的源码可以发现其本质是使用<strong>继承</strong>动态创建需要代理类的子类，然后复写对应方法达到拦截目的，因此也说明了Mockito不支持final类，不支持static，private等方法mock的原因，不过这个算不上缺点，private方法外部根本不用关心，因此无需考虑mock，static方法作为全局使用的工具类型方法，如果也需要mock那么说明存在坏代码的味道，最好的做法是重构，而不是想方设法的mock。另外Mockito提供了<code>InlineByteBuddyMockMaker</code>实现类，该类利用<strong>Instrumentation API</strong>特性实现了静态方法，私有方法，final方法等拦截，更加强大，该特性还在试验中，感兴趣的可以尝试。</p>
<p><code>ByteBuddy</code>代理类默认拦截器为<code>org.mockito.internal.creation.bytebuddy.MockMethodInterceptor</code>类。该类面向ByteBuddy提供的调用入口，内部会将参数包装后，给到真正的Mock拦截器<code>org.mockito.invocation.MockHandler</code>，进而决定返回或者插桩定义。<code>MockHandler</code>的实现可以理解为下图结构，<br><img src="http://res.mrdear.cn/uPic/mockito_method_handler.png-default"></p>
<p>**3.**Mockito如何保证线程安全</p>
<p>在测试中会开启多线程测试，而Mockito又是一个静态调用形式，内部MockitoCore是全局共享变量，如果没有一定处理措施，必然会导致并发冲突。Mockito的解决方案是使用ThreadLocal，其提供<code>MockingProgress</code>类存储当前mock进度信息，提供<code>ThreadSafeMockingProgress</code>使其与ThreadLocal进行绑定，线程安全和mock本身原理关系不是很大，这里不多做分析，具体细节感兴趣的可以去了解下。</p>
<h3 id="Mockito是如何预先定义方法返回值"><a href="#Mockito是如何预先定义方法返回值" class="headerlink" title="Mockito是如何预先定义方法返回值"></a>Mockito是如何预先定义方法返回值</h3><p>常用的预定义方法返回值主要有两种形式<code>when() thenXXX</code>，<code>doXXX when</code>，很多同学不理解这两个的区别，事实不然，两者的存在都很有必要，按照上述拦截后执行逻辑，分别分析两者的不同点。</p>
<p>**1.**when() thenXXX是如何预定义值的</p>
<p>还是以上述为例<code>Mockito.when(mockService.queryUser(Mockito.eq(&quot;xxx&quot;))).thenReturn(new User(&quot;屈定&quot;));</code>，Java是顺序执行代码的，那么针对该部分代码执行顺序可以拆解为以下几个步骤，下面分别分析：</p>
<ul>
<li>Mockito.eq(“xxx”)<ul>
<li>往<code>MockingProgress</code>添加一个equal的ArgumentMatcher，<code>MockingProgress</code>使用Stack结构存储ArgumentMatcher，因此可以推测出，这里默认规则在方法拦截前所有的ArgumentMatcher都会按照执行顺序入栈。</li>
</ul>
</li>
<li>mockService.queryUser<ul>
<li>mockService已经被代理了，因此该方法会直接进入<code>org.mockito.internal.handler.MockHandlerImpl#handle</code>中，此时MockHandler发现该是一个方法调用，接着去查找对应的ArgumentMatcher与其绑定，存到Stub Container中，mockContainer结构可以看作为<code>UserService+queryUser+eq(xxx)  -&gt; NULL</code></li>
</ul>
</li>
<li>Mockito.when<ul>
<li>这里when接收到的参数实际上是NULL，因为上面的queryUser并没有对应值与其绑定，此时When相当于返回<code>MockingProgress</code>的mock进度</li>
</ul>
</li>
<li>new User(“屈定”)<ul>
<li>普通创建对象</li>
</ul>
</li>
<li>OngoingStubbing.thenReturn<ul>
<li>OngoingStubbing则是<code>MockingProgress</code>中当前mock进度，thenReturn会创建<code>Returns</code>对象，该对象会与上一个方法调用进行绑定，因此执行完毕后，mockContainer结构可以看作<code>UserService+queryUser+eq(xxx)  -&gt; User(“屈定”)</code></li>
</ul>
</li>
</ul>
<p>**2.**doXXX when()是如何预定义的</p>
<p>在doXXX when()模式下，一般这样<code>Mockito.doReturn(new User(&quot;屈定&quot;)).when(mockService).queryUser(Mockito.eq(&quot;xxx&quot;));</code>定义mock，按照同样步骤进行拆解：</p>
<ul>
<li>new User(“屈定”)<ul>
<li>普通创建对象</li>
</ul>
</li>
<li>Mockito.doReturn<ul>
<li>此时该方法创建的是一个<code>StubberImpl</code>对象，与上述流程是不一样的。该类有成员变量<code>List&lt;Answer&lt;?&gt;&gt; answers</code>，此方法执行会将对应Answer对象暂存到该集合中</li>
</ul>
</li>
<li>Stubber.when<ul>
<li>when的入参是被mock对象，那么就能拿到<code>MockingProgress</code>获取当前mock进度，之后再把成员变量<code>List&lt;Answer&lt;?&gt;&gt; answers</code>与当前mock对象进行绑定，此时mockContainer结构可以看作<code>NULL -&gt; User(“屈定”)</code></li>
</ul>
</li>
<li>Mockito.eq(“xxx”)<ul>
<li>同上，往<code>MockingProgress</code>添加一个equal的ArgumentMatcher</li>
</ul>
</li>
<li>UserService.queryUser<ul>
<li>同上，进入到拦截器，然后与对应Answer绑定，mockContainer结构可以看作为<code>UserService+queryUser+eq(xxx)  -&gt; User(“屈定”)</code></li>
</ul>
</li>
</ul>
<p>**3.**两者的不同点带来什么不同</p>
<p>按照上述流程分析，无论是<code>when() thenXXX</code>还是<code>doXXX when()</code>，最终都能得到<code>UserService+queryUser+eq(xxx)  -&gt; User(“屈定”)</code>的结构，那两者的不同点是为了什么呢？<br>在Mock代理中，因为Mock都会被拦截掉，并不会有任何真实调用，两者所产生的效果是没有区别的。<code>doXXX when()</code>主要是用在Spy和void返回形式上，在Spy模式下，<code>UserService.queryUser</code>会产生真实调用，<code>doXXX when()</code>的做法是将调用放在最后一步，调用时，已经知道对应的Answer了，而<code>when() thenXXX</code>则是在最后一步才知道Answer，无法做拦截。</p>
<h3 id="Mockito是如何拦截方法执行并返回给定mock值的"><a href="#Mockito是如何拦截方法执行并返回给定mock值的" class="headerlink" title="Mockito是如何拦截方法执行并返回给定mock值的"></a>Mockito是如何拦截方法执行并返回给定mock值的</h3><p>第二个问题分析过程中实际上已经回答了这个问题，在Mock构建完毕后，对应的方法调用Invocation以及Answer是一一对应绑定起来的，因此只需要找到对应的stub，然后发现有Answer直接返回即可</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p>上文主要来源于源码翻查以及网上一些资料，如有错误，还请指出。</p>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/mockito-design">反模式的经典 - Mockito 设计解析</a><br><a target="_blank" rel="noopener" href="https://www.javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html">Mockito官方文档</a></p>

        
        <blockquote class="post-announce">
            <ul>
                <li>版权声明: 感谢您的阅读，本文由<a href="https://mrdear.cn">屈定's Blog</a>版权所有。如若转载，请注明出处。 </li>
                <li>文章标题: <a href="https://mrdear.cn/posts/framework-mockito.html">Mockito -- Mockito原理</a> </li>
                <li>文章链接: <a href="https://mrdear.cn/posts/framework-mockito.html">https://mrdear.cn/posts/framework-mockito.html</a> </li>
            </ul>
        </blockquote>
        
        <div class="post__prevs">
            <div class="post__prev">
                
                <a href="/posts/design-patterns-event_design.html" title="设计模式 -- 进程内事件机制设计"><i class="iconfont icon-prev"></i>设计模式 -- 进程内事件机制设计</a>
                
            </div>
            <div class="post__prev post__prev--right">
                
                <a href="/posts/readnote-http.html" title="读书笔记 -- 透视HTTP协议">读书笔记 -- 透视HTTP协议<i class="iconfont icon-next"></i></a>
                
            </div>
        </div>
    </div>
</article>

        
            <div id="comment-container" class="giscus"></div>
        
        
    </div>

    <aside class="page__sidebar">
    <!-- 
        <div class="sidebar__img">
            <img src="https://res.mrdear.cn/1588682282.png" alt="屈定's Blog" title="屈定's Blog">
        </div>
     -->

    <form id="page-search-from" class="page__search-from" action="/search/">
        <label class="search-form__item">
            <input class="input" type="text" name="search" placeholder="Search...">
            <i class="iconfont icon-search"></i>
        </label>
    </form>

    
        <div class="sidebar__block">
            <h3 class="block__title">简介</h3>
            <p class="block__text">记录成为程序员以来的历程,分享自己的认知,如果对你有帮助可以订阅最下方的RSS.</p>
        </div>
    

    <div class="sidebar__block">
        <h3 class="block__title">文章分类</h3>
        <ul class="block-list"><li class="block-list-item"><a class="block-list-link" href="/categories/%E8%BD%AC%E8%BD%BD/">转载</a><span class="block-list-count">3</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a><span class="block-list-count">6</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%93%E9%A2%98/">设计模式专题</a><span class="block-list-count">16</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E6%A1%86%E6%9E%B6%E4%B8%8E%E4%B8%AD%E9%97%B4%E4%BB%B6/">框架与中间件</a><span class="block-list-count">15</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E6%9D%82%E4%B8%83%E6%9D%82%E5%85%AB/">杂七杂八</a><span class="block-list-count">7</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/">操作系统</a><span class="block-list-count">1</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E5%B7%A5%E5%85%B7/">工具</a><span class="block-list-count">8</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E5%AE%9E%E6%88%98%E6%80%BB%E7%BB%93/">实战总结</a><span class="block-list-count">12</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/%E5%A4%AF%E5%AE%9EJava%E5%9F%BA%E7%A1%80/">夯实Java基础</a><span class="block-list-count">20</span></li><li class="block-list-item"><a class="block-list-link" href="/categories/Spring%E7%B3%BB%E5%88%97%E4%B8%93%E9%A2%98/">Spring系列专题</a><span class="block-list-count">10</span></li></ul>
    </div>

    
        <div class="sidebar__block" id="sidebar-toc">
            <h3 class="block__title">文章目录</h3>
            <div class="post-toc">
                <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Mocito%E4%BD%93%E7%B3%BB"><span class="toc-number">1.</span> <span class="toc-text">Mocito体系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mockito%E5%8E%9F%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">Mockito原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Mockito%E6%98%AF%E5%A6%82%E4%BD%95%E5%88%9B%E5%BB%BAAOP%E5%AF%B9%E8%B1%A1%E7%9A%84"><span class="toc-number">2.1.</span> <span class="toc-text">Mockito是如何创建AOP对象的</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mockito%E6%98%AF%E5%A6%82%E4%BD%95%E9%A2%84%E5%85%88%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">2.2.</span> <span class="toc-text">Mockito是如何预先定义方法返回值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mockito%E6%98%AF%E5%A6%82%E4%BD%95%E6%8B%A6%E6%88%AA%E6%96%B9%E6%B3%95%E6%89%A7%E8%A1%8C%E5%B9%B6%E8%BF%94%E5%9B%9E%E7%BB%99%E5%AE%9Amock%E5%80%BC%E7%9A%84"><span class="toc-number">2.3.</span> <span class="toc-text">Mockito是如何拦截方法执行并返回给定mock值的</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">3.</span> <span class="toc-text">参考</span></a></li></ol>
            </div>
        </div>
    
    <!--
    
        <div class="sidebar__block">
            <h3 class="block__title">推荐</h3>
            <div class="block-image">
                <img style="height: 100%;width: 100%" src="https://res.mrdear.cn/jikeshijian-jvm.png">
            </div>
        </div>
     -->
    <!-- 最新文章 -->
    <!-- <div class="sidebar__block">
        <h3 class="block__title">最新文章</h3>
        
        <ul class="block-list latest-post-list">
            
                    <li class="latest-post-item">
                        <a href="/posts/work-read-rome-source.html" title="实践 -- Rome源码阅读">
                            <div class="item__cover">
                                <img src="http://res.mrdear.cn/blog_mrdear_work.png" alt="实践 -- Rome源码阅读" />
                            </div>
                            <div class="item__info">
                                <h3 class="item__title">实践 -- Rome源码阅读</h3>
                                <span class="item__text">2022-10-08</span>
                            </div>
                        </a>
                    </li>
                
                    <li class="latest-post-item">
                        <a href="/posts/readnote-source-mybatis.html" title="读书笔记 -- 通用源码阅读指南">
                            <div class="item__cover">
                                <img src="https://res.mrdear.cn/blog/uPic/readnotes-mybatis.png" alt="读书笔记 -- 通用源码阅读指南" />
                            </div>
                            <div class="item__info">
                                <h3 class="item__title">读书笔记 -- 通用源码阅读指南</h3>
                                <span class="item__text">2022-10-03</span>
                            </div>
                        </a>
                    </li>
                
                    <li class="latest-post-item">
                        <a href="/posts/linux-expect_script.html" title="Linux -- Expect Script入门">
                            <div class="item__cover">
                                <img src="https://res.mrdear.cn/linux.png" alt="Linux -- Expect Script入门" />
                            </div>
                            <div class="item__info">
                                <h3 class="item__title">Linux -- Expect Script入门</h3>
                                <span class="item__text">2022-07-16</span>
                            </div>
                        </a>
                    </li>
                
                    <li class="latest-post-item">
                        <a href="/posts/design-patterns-visitor.html" title="设计模式--访问者模式的思考">
                            <div class="item__cover">
                                <img src="http://res.mrdear.cn/designpattern.png" alt="设计模式--访问者模式的思考" />
                            </div>
                            <div class="item__info">
                                <h3 class="item__title">设计模式--访问者模式的思考</h3>
                                <span class="item__text">2022-07-03</span>
                            </div>
                        </a>
                    </li>
                
        </ul>
    
    </div> -->

    <div class="sidebar__block">
        <h3 class="block__title">文章标签</h3>
        
        <ul class="block-list tag-list clearfix">
            
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/Alfred/">Alfred</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/Dubbo/">Dubbo</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/Guava/">Guava</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/IntelliJ/">IntelliJ</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/JUC/">JUC</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/JWT/">JWT</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/Java/">Java</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/Mockito/">Mockito</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/MySQL/">MySQL</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/Mybatis/">Mybatis</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/Netty/">Netty</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/OSX/">OSX</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/Spring/">Spring</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/%E5%8A%A8%E6%BC%AB/">动漫</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/%E5%AE%9E%E6%88%98/">实战</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/%E5%B7%A5%E4%BD%9C/">工作</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/">读书笔记</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/%E8%BD%AC%E8%BD%BD/">转载</a>
                    </li>  
                
                    <li class="tag-item">
                        <a class="tag-link" href="/tags/%E8%BD%AE%E5%AD%90/">轮子</a>
                    </li>  
                
        </ul>
    
    </div>

    <!-- <div class="sidebar__block">
        <h3 class="block__title">友情链接</h3>
        <ul class="block-list">
            
        </ul>
    </div> -->
</aside>
</main>


        
            <!-- 页脚 -->
<footer class="page__footer">
    <section class="footer__top">
        <div class="page__container footer__container">
            
            <div class="footer-top__item footer-top__item--2">
                <h3 class="item__title">关于</h3>
                <div class="item__content">
                    <p class="item__text">编程是一件幸福的事情,不要让你的工作变得索然无味.</p>
                    <ul class="footer__contact-info">
                        <li class="contact-info__item">
                            <i class="iconfont icon-address"></i>
                            <span>HangZhou, China</span>
                        </li>
                        <li class="contact-info__item">
                            <i class="iconfont icon-email2"></i>
                            <span>admin@mrdear.cn</span>
                        </li>
                        <li class="contact-info__item">
                            <i class="iconfont icon-address"></i>
                            <span><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn" style="color: #69747a;text-decoration:none">2017 皖ICP备20002403号</a></span>
                        </li>
                    </ul>
                </div>
            </div>

            
            
                <div class="footer-top__item footer__image">
                    <img src="https://res.mrdear.cn/1588682282.png" alt="logo" title="屈定's Blog">
                </div>
            
            
            
            
                
                    <div class="footer-top__item">
                        <h3 class="item__title">友情链接</h3>
                        <div class="item__content">
                            <ul class="footer-top__list">
                                
                                    <li class="list-item">
                                        <a href="http://www.kuranado.com/" title="有上进心的学弟" target="_blank">KURANADO</a>
                                    </li>
                                
                                    <li class="list-item">
                                        <a href="https://blog.alswl.com/" title="公司前辈" target="_blank">log4D</a>
                                    </li>
                                
                                    <li class="list-item">
                                        <a href="http://razertory.me" title="Ruby爱好者,编程小伙伴" target="_blank">Razertory</a>
                                    </li>
                                
                                    <li class="list-item">
                                        <a href="https://dongzl.github.io" title="很谦虚的大佬" target="_blank">董宗磊</a>
                                    </li>
                                
                            </ul>
                        </div>
                    </div>
                
                    <div class="footer-top__item">
                        <h3 class="item__title">构建工具</h3>
                        <div class="item__content">
                            <ul class="footer-top__list">
                                
                                    <li class="list-item">
                                        <a href="https://hexo.io/" title="Blog Framework" target="_blank">Hexo</a>
                                    </li>
                                
                                    <li class="list-item">
                                        <a href="https://github.com/Mrminfive/hexo-theme-skapp" title="Blog Theme" target="_blank">hexo-theme-skapp</a>
                                    </li>
                                
                            </ul>
                        </div>
                    </div>
                
            
        </div>
    </section>
    <section class="footer__bottom">
        <div class="page__container footer__container">
            <div style="display: inline-flex;font-size: 12px;align-items: center;">
                <p class="footer__copyright">©
                    <a href="https://github.com/Mrminfive/hexo-theme-skapp" target="_blank">Skapp</a> 2017 powered by
                    <a href="http://hexo.io/" target="_blank">Hexo</a>, made by 
                    <a href="https://github.com/Mrminfive" target="_blank">minfive</a>,
                </p>
                <div style="width: 50px;margin-bottom: -5px;">
                    <a href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" target="_blank">
                        <img style="max-width:100%; max-height:100%" src='/img/youpaiyun.png'/>
                    </a>
                </div>提供CND加速/云存储服务.
            </div>
            <ul class="footer__social-network clearfix">
                
                
                    <li class="social-network__item">
                        <a href="https://github.com/mrdear" target="_blank" title="github">
                            <i class="iconfont icon-github"></i>
                        </a>
                    </li>
                
                    <li class="social-network__item">
                        <a href="https://www.zhihu.com/people/niu.dear/activities" target="_blank" title="知乎">
                            <i class="iconfont icon-zhihu"></i>
                        </a>
                    </li>
                
                    <li class="social-network__item">
                        <a href="mailto:niudear@foxmail.com" target="_blank" title="email">
                            <i class="iconfont icon-email"></i>
                        </a>
                    </li>
                
                    <li class="social-network__item">
                        <a href="/atom.xml" target="_blank" title="rss">
                            <i class="iconfont icon-rss"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </section>
</footer>
        

        
            <!-- 返回顶部 -->
<div id="back-top" class="back-top back-top--hidden js-hidden">
    <i class="iconfont icon-top"></i>
</div>
        
    </div>

    <!-- build:js /js/common.js -->
        <script type="text/javascript" src="/js/common/utils.js"></script>
        <script type="text/javascript" src="/js/common/pack.js"></script>
        <script type="text/javascript" src="/js/common/animation.js"></script>
        <script type="text/javascript" src="/js/layout/loading.js"></script>
        <script type="text/javascript" src="/js/layout/header.js"></script>
        <script type="text/javascript" src="/js/layout/back-top.js"></script>
        <script type="text/javascript" src="/js/layout/sidebar.js"></script>
        <script type="text/javascript" src="/js/layout/post.js"></script>
    <!-- endbuild -->

    
    
<script src="/js/page/post.js"></script>



    
    
    <script src="https://giscus.app/client.js"
            data-repo="mrdear/mrdear.cn"
            data-repo-id="R_kgDOIEi9fQ"
            data-category="General"
            data-category-id="DIC_kwDOIEi9fc4CRrm_"
            data-mapping="url"
            data-strict="0"
            data-reactions-enabled="1"
            data-emit-metadata="0"
            data-input-position="top"
            data-theme="light"
            data-lang="zh-CN"
            data-loading="lazy"
            crossorigin="anonymous"
            async>
    </script>




    <!-- 不蒜子统计 -->




    <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":true,"debug":false,"model":{"jsonPath":"/live2dw/assets/koharu.model.json"},"display":{"position":"left","width":100,"height":150},"mobile":{"show":true,"scale":0.5},"react":{"opacityDefault":1,"opacityOnHover":1},"log":false});</script>

     








</body>
</html>